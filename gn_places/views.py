# generated by appcreator
from django.contrib.auth.decorators import login_required
from django.utils.decorators import method_decorator
from django.urls import reverse_lazy
from django.views.generic.edit import DeleteView
from gn_places.filters import GeoNamesPlaceListFilter
from gn_places.forms import GeoNamesPlaceFilterFormHelper, GeoNamesPlaceForm
from gn_places.tables import GeoNamesPlaceTable
from gn_places.models import (
    GeoNamesPlace
)
from browsing.browsing_utils import (
    GenericListView, BaseCreateView, BaseUpdateView, BaseDetailView
)


class GeoNamesPlaceListView(GenericListView):

    model = GeoNamesPlace
    filter_class = GeoNamesPlaceListFilter
    formhelper_class = GeoNamesPlaceFilterFormHelper
    table_class = GeoNamesPlaceTable
    init_columns = [
        'id', 'gn_name',
    ]
    enable_merge = True


class GeoNamesPlaceDetailView(BaseDetailView):

    model = GeoNamesPlace
    template_name = 'gn_places/gn_place_detail.html'


class GeoNamesPlaceCreate(BaseCreateView):

    model = GeoNamesPlace
    form_class = GeoNamesPlaceForm

    @method_decorator(login_required)
    def dispatch(self, *args, **kwargs):
        return super(GeoNamesPlaceCreate, self).dispatch(*args, **kwargs)


class GeoNamesPlaceUpdate(BaseUpdateView):

    model = GeoNamesPlace
    form_class = GeoNamesPlaceForm

    @method_decorator(login_required)
    def dispatch(self, *args, **kwargs):
        return super(GeoNamesPlaceUpdate, self).dispatch(*args, **kwargs)


class GeoNamesPlaceDelete(DeleteView):
    model = GeoNamesPlace
    template_name = 'webpage/confirm_delete.html'
    success_url = reverse_lazy('gn_places:geonamesplace_browse')

    @method_decorator(login_required)
    def dispatch(self, *args, **kwargs):
        return super(GeoNamesPlaceDelete, self).dispatch(*args, **kwargs)
